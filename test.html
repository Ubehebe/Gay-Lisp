<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript" src="datum.js"></script>
    <script type="text/javascript" src="types.js"></script>
    <script type="text/javascript" src="errors.js"></script>
    <script type="text/javascript" src="scan.js"></script>
    <script type="text/javascript" src="parse.js"></script>
    <script type="text/javascript" src="read.js"></script>
    <script type="text/javascript" src="macro.js"></script>
    <script type="text/javascript" src="eval.js"></script>
    <script type="text/javascript" src="stdproc.js"></script>
    <script type="text/javascript" src="unit_test.js"></script>
    <script type="text/javascript">

        function doScan() {
            console.log(
                    new Scanner(
                            document.getElementById('toEval').value).tokenize());
        }

        function doRead() {
            console.log(
                    new Reader(
                            new Scanner(
                                    document.getElementById('toEval').value)
                    ).read());
        }

        function doParse() {
            console.log(
                    new Parser(
                            new Reader(
                                    new Scanner(document.getElementById('toEval').value)
                            ).read()
                    ).parse(document.getElementById('lhs').value));
        }

        function doEval() {
            var ans =
                    new Parser(
                            new Reader(
                                    new Scanner(document.getElementById('toEval').value)
                            ).read()
                    ).parse(document.getElementById('lhs').value).eval(builtins);
            console.log(ans);
            document.getElementById('result').value = ans;
        }

        function doTranscribe() {
            var datums = new Reader(
                    new Scanner(
                            document.getElementById('toEval').value)
            ).read();

            var replacement = new Reader(
                    new Scanner(
                            document.getElementById('identifierReplacement').value
                    )
            ).read();

            var replacementDict = {};
            replacementDict[document.getElementById('identifier').value] = replacement;
            var ans = datums.replaceSiblings(replacementDict);
            console.log(ans);
            document.getElementById('result').value = ans.toString();

        }

    </script>

</head>
<body>
<textarea id='toEval' rows="5" cols="80"></textarea>
<textarea id='result' rows="1" cols="80"></textarea>

<p>
    <button onclick='doRead()'>read</button>
</p>
<p>
    <button onclick="doScan()">scan</button>
    <button onclick="testScanner()">scanner unit tests</button>
</p>
<p>
    <button onclick='doParse()'>parse</button>
    <label>as:</label><textarea id='lhs' rows="1" cols="20"></textarea>
    <button onclick="testParser()">parser unit tests</button>
</p>
<p>
    <button onclick='doEval()'>eval</button>
</p>
<p>
    <button onclick='doTranscribe()'>transcribe</button>
    <label>identifier:</label><textarea id='identifier' rows='1' cols='10'></textarea>
    <label>with:</label><textarea id='identifierReplacement' rows='1' cols='20'></textarea>
</p>
</body>
</html>
