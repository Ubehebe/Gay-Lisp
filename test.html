<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript" src="types.js"></script>
    <script type="text/javascript" src="errors.js"></script>
    <script type="text/javascript" src="scan.js"></script>
    <script type="text/javascript" src="parse.js"></script>
    <script type="text/javascript" src="parse_test.js"></script>
    <script type="text/javascript" src="macro.js"></script>
    <script type="text/javascript" src="eval.js"></script>
    <script type="text/javascript" src="stdproc.js"></script>
    <script type="text/javascript">

        function doScan() {
            console.log(scanner.tokenize(document.getElementById('toEval').value));
        }

        function doParse() {
            console.log(new Parser(document.getElementById('toEval').value).parse(document.getElementById('lhs').value));
        }

        function doEval() {
            try {
                var text = document.getElementById('toEval').value;
                var ans = _Eval(new Parser(text).parse(), builtins, text);
                console.log(ans);
                document.getElementById('result').value = '' + ans;
            } catch (x) {
                document.getElementById('result').value = x.toString();
            }
        }

        function doReparse() {
            var text = document.getElementById('toEval').value;
            var node = new Parser(text).parse(document.getElementById('reparseFrom').value);
            var newText = recoverText(node, text);
            var newParse = new Parser(newText).parse(document.getElementById('reparseTo').value);
            console.log(newParse);
        }
    </script>

</head>
<body>
<textarea id='toEval' rows="5" cols="80"></textarea>
<textarea id='result' rows="1" cols="80"></textarea>

<p>
    <button onclick="doScan()">scan</button>
</p>
<p>
    <button onclick='doParse()'>parse</button>
    <label>as:</label><textarea id = 'lhs' rows="1" cols="20"></textarea>
</p>
<p>
    <button onclick='doEval()'>eval</button>
</p>
<p>
    <button onclick='doReparse()'>reparse</button>
    <label>from:</label><textarea id='reparseFrom' rows="1" cols="20"></textarea>
    <label>to:</label><textarea id='reparseTo' rows="1" cols="20"></textarea>
</p>
</body>
</html>